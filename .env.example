# ============================================================
# MireApprove — переменные окружения
# ============================================================
# Скопируйте этот файл: cp .env.example .env
# Заполните значения и запустите: docker compose up -d --build
# ============================================================


# ========================
#   БАЗА ДАННЫХ (обязательно)
# ========================

# Имя базы данных PostgreSQL
POSTGRES_DB=mireapprove

# Имя пользователя PostgreSQL
POSTGRES_USER=postgres

# Пароль пользователя PostgreSQL. Придумайте надёжный пароль.
POSTGRES_PASSWORD=your_secure_password_here

# Порт PostgreSQL (менять не нужно, если нет конфликтов)
POSTGRES_PORT=5432

# Строка подключения к БД.
# Формат: postgresql://пользователь:пароль@хост/база
# В Docker хост = "postgres" (имя сервиса из docker-compose).
# Для локальной разработки: postgresql://postgres:пароль@localhost/mireapprove
DSN=postgresql://postgres:your_secure_password_here@postgres/mireapprove


# ========================
#   БЕЗОПАСНОСТЬ (обязательно)
# ========================

# Ключ шифрования Fernet для хранения паролей пользователей в БД.
# Сгенерируйте командой:
#   python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
# ВАЖНО: если потеряете ключ — все зашифрованные пароли станут нечитаемыми.
ENCRYPTION_KEY=your_fernet_key_here


# ========================
#   TELEGRAM БОТ (обязательно)
# ========================

# Токен бота от @BotFather (формат: 123456789:ABC-DEF...)
# Получить: откройте @BotFather → /newbot → следуйте инструкциям → скопируйте токен
BOT_TOKEN=your_bot_token_here

# Username бота БЕЗ символа @ (например: MyAttendBot)
# Используется для формирования ссылок на бота
BOT_USERNAME=your_bot_username


# ========================
#   АДМИНИСТРАТОР (обязательно)
# ========================

# Telegram ID суперадминистратора (числовой ID, не username).
# Получает полный доступ к админ-панели.
# Узнать свой ID: напишите боту @userinfobot в Telegram
SUPER_ADMIN=your_telegram_user_id


# ========================
#   REDIS (опционально)
# ========================

# URL подключения к Redis для кэширования и сессий.
# В Docker: redis://redis:6379/0 (имя сервиса из docker-compose)
# Для локальной разработки: redis://localhost:6379/0
REDIS_URL=redis://redis:6379/0


# ========================
#   ПОРТ ПРИЛОЖЕНИЯ (опционально)
# ========================

# Порт, на котором запускается FastAPI-сервер.
# Менять только если порт 8001 уже занят.
APP_PORT=8001


# ========================
#   ССЫЛКИ И КОНТАКТЫ (обязательно для работы бота)
# ========================

# URL веб-приложения (Mini App).
# Эта ссылка открывается при нажатии кнопки "Отметка посещаемости" в боте.
# Должен совпадать с доменом, на котором развёрнут проект (с https://).
WEBAPP_URL=https://your-domain.com/

# Ссылка на Telegram-канал с новостями проекта.
# Отправляется пользователям в приветственном сообщении бота.
# Формат: https://t.me/your_channel
NEWS_CHANNEL_URL=https://t.me/your_channel

# Ссылка на страницу для пожертвований (DonationAlerts, ЮMoney, и т.д.).
# Показывается как кнопка "СБП / Карта" в меню доната.
DONATE_URL=https://your-donate-link.com

# Username Telegram-аккаунта поддержки БЕЗ символа @.
# Показывается пользователям, у которых нет доступа к приложению.
SUPPORT_USERNAME=your_support_username

# Username Telegram-бота для приёма донатов БЕЗ символа @.
# Показывается в сообщении "Иные способы поддержки".
# Если такого бота нет — можно оставить пустым.
DONATE_BOT_USERNAME=your_donate_bot_username

# URL сервиса для определения внешнего IP (используется для диагностики).
# Обычно менять не нужно.
# IP_CHECK_URL=https://api.ipify.org?format=json


# ========================
#   ВНЕШНИЕ СЕРВИСЫ (опционально)
# ========================

# API-ключ для доверенных сервисов (service-to-service авторизация).
# Нужен только если вы подключаете внешние сервисы через External Auth API.
# Если не используете — оставьте пустым.
# TRUSTED_SERVICE_API_KEY=your_api_key_here


# ========================
#   ФРОНТЕНД (встраиваются при сборке Docker-образа)
# ========================

# URL API для фронтенда. Должен совпадать с доменом проекта.
# Используется при сборке React-приложения (Vite встраивает при npm run build).
VITE_API_URL=https://your-domain.com

# Разрешённые хосты для Vite dev-сервера (только для локальной разработки).
# VITE_ALLOWED_HOSTS=.yourdomain.com,.trycloudflare.com

# Демо-режим: true — приложение работает с моковыми данными без бэкенда.
# Полезно для демонстрации UI без реальных учётных записей.
# VITE_DEMO_MODE=false
